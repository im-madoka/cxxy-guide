---
title: 数组
description: 更加深入的探索数组的奥秘
---

在[复合数据类型](/docs/cpp/basic/complex_data_type)一节中，我们已经了解了数组的基本定义和初始化方法。本章将进一步深入讲解数组的底层原理、常见操作、多维数组以及数组与函数的关系。

## 数组的内存结构与原理

数组在内存中是**连续存储**的，这意味着数组的所有元素在内存中是紧挨着排列的。例如，`int arr[5]` 会分配 5 个连续的 `int` 类型的空间。

这种连续性带来了两个重要特性：

- 可以通过下标快速访问任意元素，时间复杂度为 O(1)。
- 可以通过指针运算遍历数组。

第一个特性我们在之前已经提到过，第二个特性我们会在下一节指针中提到。

## 数组的遍历与常见操作

数组最常见的操作就是遍历和批量处理数据。在前面的章节我们已经学过了计数循环，而数组的遍历最常用的就是技术循环。让我们用传统的方式写一遍：

```cpp
int arr[5] = {1, 2, 3, 4, 5};
for (int i = 0; i < 5; ++i) {
    cout << arr[i] << endl;
}
```

当然，在现代 C++ 中，还有一个更加简便的方法：

```cpp
int arr[5] = {1, 2, 3, 4, 5};
for (const auto& elem : arr) {
    cout << elem << endl;
}
```

这个是 C++ 11 加入的 `for-range`，即基于范围的循环。这种写法不仅更加简洁，而且可以减少下标越界的风险，因为它会自动遍历整个数组的每一个元素，无需手动指定下标范围。

<Callout>需要注意的是，范围 for 循环在处理**原生数组**时，编译器会根据数组的大小自动遍历所有元素，但如果你传递的是指针或者动态分配的数组（如 `int* arr = new int[n];`），则无法直接使用这种写法。</Callout>

有关 `for-range` 的更多细节，我们后面会专门提到，这里就不过多赘述。对于新手，我仍然推荐先熟悉第一种传统的方法。

`WIP 未完待续`
